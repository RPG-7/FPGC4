; First FPGC4 game: a platformer

; for debugging to pc
`include lib/UART.asm
; for basic functions
`include lib/STD.asm
; for graphics operations
`include lib/GFX.asm

; DATA INCLUDES
`include data_lv1.asm

Main:

    savpc r15
    push r15
    jump GFX_initVram

    ; print some data to Window
    addr2reg WINDOWTEXT r1   ; data to copy
    load 25 r2              ; length of data
    load 40 r3              ; offset from start
    load 2 r4               ; palette idx

    savpc r15
    push r15
    jump GFX_printWindowColored   

    ; print some data to BG
    addr2reg BACKGROUNDTILES r1   ; data to copy
    load 6 r2               ; length of data
    load 16 r3              ; offset from start
    load 1 r4               ; palette idx

    savpc r15
    push r15
    jump GFX_printBGColored  

    ; ascii address
    addr2reg ASCIITABLE r1 

    savpc r15
    push r15
    jump GFX_copyPatternTable

    ; palette address
    addr2reg PALETTETABLE r1 

    savpc r15
    push r15
    jump GFX_copyPaletteTable
    

    halt    

WINDOWTEXT:
.ds "Graphics printing test :O"

BACKGROUNDTILES:
.db 176 176 177 177 178 178





Int1:
    reti

Int2:
    reti

Int3:
    reti

Int4:
    reti



PALETTETABLE:
.dw 0b00000000000000001111111111111111 ; black, black,  white,  white
.dw 0b00000011000000000000000000011101 ; blue, black, black, greenblueish
.dw 0b00000000000000000000000011100000 ; black, black, black, red
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000


ASCIITABLE:
.dw 0b00011010101010010110111111111110
.dw 0b01111111111111111011111111000000
.dw 0b10110000000000001011000000000000
.dw 0b10110000000000001011000000000000 //tile  0
.dw 0b00010101010101010110101010101010
.dw 0b01101010101010101011111010111011
.dw 0b11111111111111111111111111111111
.dw 0b11111111111111111111111111111111 //tile  1
.dw 0b00010101010100100111111111110100
.dw 0b01111111111111001010101010111101
.dw 0b10101010101011011010101010101101
.dw 0b10101010101011011010101010101101 //tile  2
.dw 0b00011010101001000110111111111001
.dw 0b01111111111111011011110000111110
.dw 0b10110000000011101011000000001110
.dw 0b10110000000011101011000000001110 //tile  3
.dw 0b00000000000000000001010000000000
.dw 0b00010100000000000000000000000100
.dw 0b00000000000001000000000000000000
.dw 0b00000001000000000000000000000000 //tile  4
.dw 0b00011000000110000001100000011000
.dw 0b01010110010101100101011001010110
.dw 0b00111100001111110011110000111111
.dw 0b00111100001111000011110000111100 //tile  5
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000001000000000010
.dw 0b01011111111110000001000000000010
.dw 0b00000000000000000000000000000000 //tile  6
.dw 0b00000000000000010000000000001001
.dw 0b00000000000010100000000000000000
.dw 0b00000000000000000000000000001010
.dw 0b00000000000010010000000000000001 //tile  7
.dw 0b00011010101010100111111010101010
.dw 0b01111110101010100111111010101010
.dw 0b00011010101010100111101010101010
.dw 0b01111010101010100111101010101010 //tile  8
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  9
.dw 0b00000000000001100000000000111101
.dw 0b00000000001111010000000000111101
.dw 0b00000000000001100000000000001101
.dw 0b00000000000011010000000000001101 //tile  10
.dw 0b00011010101001000111111010111101
.dw 0b01111110101111010111101010111101
.dw 0b00011010101001000111101010101101
.dw 0b01111010101011010111101010101101 //tile  11
.dw 0b00011010101001000110111111111001
.dw 0b01111111111111011011000000001110
.dw 0b10110000000011101011000000001110
.dw 0b10111111111111100110101010101001 //tile  12
.dw 0b00010100000101000001010000010100
.dw 0b00010100000101000001010000010100
.dw 0b00010100000101000001010000010100
.dw 0b00010100000101000001010000010100 //tile  13
.dw 0b00000000000000000000000000000001
.dw 0b00000100000000100000000101000010
.dw 0b00000010010100100000000010010111
.dw 0b00000000001011110101010101111110 //tile  14
.dw 0b00010101010101010001010101010101
.dw 0b00010101010001010001011000010101
.dw 0b00011000000101011110000001010101
.dw 0b11110001010101011011111010100001 //tile  15
.dw 0b00011010101010100111111010101010
.dw 0b01111110101010100111111010101010
.dw 0b01111010101010100111101010111010
.dw 0b01001111111111110001010101010100 //tile  16
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000010100000000
.dw 0b10010101010101011110101010101011 //tile  17
.dw 0b00000000000001100000000000111101
.dw 0b00000000001111010000000000111101
.dw 0b00000000000011010000110000001101
.dw 0b11111111111110011001010101010110 //tile  18
.dw 0b00011010101001000111111010111101
.dw 0b01111010101011010111111010101101
.dw 0b01111010101011010111101010101101
.dw 0b01001111111100010001010101010100 //tile  19
.dw 0b00000000010000000000000100000000
.dw 0b00000001010000000000000100000000
.dw 0b00000001010000000000010010010000
.dw 0b00000100100100000000000101000000 //tile  20
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000100001001000001 //tile  21
.dw 0b00011010101111100000000000011111
.dw 0b00000000010110110000000101100001
.dw 0b00000001100000010000010000000001
.dw 0b00000000000000010000000000000001 //tile  22
.dw 0b00010110101010100101001111111111
.dw 0b01101000111111110011101000111111
.dw 0b00111110101111110011111111101111
.dw 0b10111111111111111111111111111111 //tile  23
.dw 0b00011010101010010110111111111111
.dw 0b01111111110011111011110000000000
.dw 0b10110000000000001011000000000000
.dw 0b10011111111111110110101010101001 //tile  24
.dw 0b00010101010101010110101010101001
.dw 0b01101011111010101111111111111111
.dw 0b11111111111111111011111111111111
.dw 0b01101010101010100001010101010100 //tile  25
.dw 0b00010101010100100111111111110100
.dw 0b01111111101111001010101010111101
.dw 0b10101010101011011010101010111101
.dw 0b11010111111100010001010101010100 //tile  26
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000010000000000000101 //tile  27
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b01010000000000001001000000000000 //tile  28
.dw 0b00011010101001000010101111101000
.dw 0b00101111111110000011110101111100
.dw 0b00111101011111000010111111111000
.dw 0b00101011111010000010101111101000 //tile  29
.dw 0b00011010101001000010101111101000
.dw 0b00101111111110000011111111111100
.dw 0b00111111111111000011110101111100
.dw 0b00110111110111000011011111011100 //tile  30
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000001000000010000
.dw 0b00010000000100000101100001011000
.dw 0b01011000010110000110110001101100 //tile  31
.dw 0b00011010101010010110001111111111
.dw 0b01001111110011111011110000000000
.dw 0b10000000000000000011000000000000
.dw 0b00000000000000000000000000000000 //tile  32
.dw 0b00011001010101010111101111111101
.dw 0b01111110101111111010101010101010
.dw 0b10101010101010101110101010101010
.dw 0b10101010101010101010101010101010 //tile  33
.dw 0b00010101010100100110111111110100
.dw 0b01111111101111001010101010111101
.dw 0b10101010101011011010101010101001
.dw 0b10101010101010101010101010101010 //tile  34
.dw 0b00000000000101100000000000000101
.dw 0b00000000000000010000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  35
.dw 0b00011010101010101101101010101010
.dw 0b01101010101010101010101010101010
.dw 0b10101010101010101010101010101010
.dw 0b10101010101010101010101010101010 //tile  36
.dw 0b00010110100101000001011010010100
.dw 0b00011010101001000010101111101000
.dw 0b00101011111010000001101010100100
.dw 0b00010110100101000011011010011100 //tile  37
.dw 0b00011010101001000001101010100100
.dw 0b00011010101001000001010101010100
.dw 0b00010101010101000011010101011100
.dw 0b00111101011111000010110101111000 //tile  38
.dw 0b00011011000110110001011000010110
.dw 0b00010110000101100000010000000100
.dw 0b00000100000001000000000000000000
.dw 0b00000000000000000000000000000000 //tile  39
.dw 0b00011010101010101010111111111111
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  40
.dw 0b00010101010101010110101010101001
.dw 0b11111111111111111111111111111111
.dw 0b11111111111111111111111111111111
.dw 0b11111111111111111111111111111111 //tile  41
.dw 0b00010101010100100111111111111101
.dw 0b10101010101010101010101010101010
.dw 0b10101010101010101010101010101010
.dw 0b10101010101010101010101010101010 //tile  42
.dw 0b00011010101001001010111111111110
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  43
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  44
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  45
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  46
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000
.dw 0b00000000000000000000000000000000 //tile  47